<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UPSC Ascent - Admin Portal</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            line-height: 1.6;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        /* Style for active tab */
        .tab-button.active {
            background-color: #1a56db; /* Blue-700 */
            color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        /* Style for active sub-tab */
        .sub-tab-button.active {
            background-color: #3b82f6; /* Blue-500 */
            color: white;
        }
        /* Animations for modal */
        @keyframes modal-fade-in {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes modal-fade-out {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(0.95); }
        }
        .icon-svg-action {
            fill: currentColor; /* Allows Tailwind text-color classes to control SVG fill */
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <!-- Header - Directly embedded for immediate visibility -->
    <header class="bg-gradient-to-r from-blue-700 to-blue-900 text-white p-4 shadow-lg rounded-b-lg">
        <div class="container mx-auto flex flex-col md:flex-row justify-between items-center">
            <h1 class="text-3xl font-bold mb-2 md:mb-0">UPSC Ascent Admin</h1>
            <div id="admin-header-controls" class="flex items-center space-x-4">
                <span id="user-info" class="text-lg"></span>
                <button id="logout-button" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md transition-colors duration-200 hidden">Logout</button>
                <a href="index.html" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md transition-colors duration-200">Go to Portal</a>
            </div>
        </div>
    </header>

    <main class="flex-grow container mx-auto px-4 py-8">
        <!-- Login Section - Initially shown, hidden if logged in -->
        <div id="login-section" class="max-w-md mx-auto bg-white p-8 rounded-xl shadow-xl border border-gray-200 mt-10">
            <h2 class="text-3xl font-bold text-center text-gray-800 mb-6">Admin Login</h2>
            <form id="login-form" class="space-y-5">
                <div>
                    <label for="email" class="block text-gray-700 text-sm font-semibold mb-2">Email:</label>
                    <input type="email" id="email" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                <div>
                    <label for="password" class="block text-gray-700 text-sm font-semibold mb-2">Password:</label>
                    <input type="password" id="password" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors duration-200 font-semibold shadow-md">Login</button>
                <p id="login-error" class="text-red-600 text-sm text-center mt-2 hidden"></p>
            </form>
        </div>

        <!-- Admin Dashboard - Initially hidden, shown if logged in -->
        <div id="admin-dashboard" class="hidden mt-10">
            <h2 class="text-4xl font-bold text-gray-800 mb-8 text-center">Admin Dashboard</h2>

            <!-- Tab Navigation -->
            <div class="flex flex-wrap justify-center mb-8 bg-gray-100 rounded-lg p-2 shadow-inner">
                <button class="tab-button px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-blue-100 transition-colors duration-200 font-medium active" data-tab="studyMaterials">Study Materials</button>
                <button class="tab-button px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-blue-100 transition-colors duration-200 font-medium ml-2 mt-2 md:mt-0" data-tab="currentAffairs">Current Affairs</button>
                <button class="tab-button px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-blue-100 transition-colors duration-200 font-medium ml-2 mt-2 md:mt-0" data-tab="pyqs">PYQs</button>
                <button class="tab-button px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-blue-100 transition-colors duration-200 font-medium ml-2 mt-2 md:mt-0" data-tab="answerWriting">Answer Writing</button>
                <button class="tab-button px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-blue-100 transition-colors duration-200 font-medium ml-2 mt-2 md:mt-0" data-tab="syllabus">Syllabus</button>
                <button class="tab-button px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-blue-100 transition-colors duration-200 font-medium ml-2 mt-2 md:mt-0" data-tab="studyPlanners">Study Planners</button>
                <button class="tab-button px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-blue-100 transition-colors duration-200 font-medium ml-2 mt-2 md:mt-0" data-tab="weeklyPlan">Weekly Plan</button> <!-- NEW TAB -->
            </div>

            <!-- Tab Content: Study Materials -->
            <div id="tab-content-studyMaterials" class="tab-content bg-white p-8 rounded-xl shadow-md border border-gray-200">
                <h3 class="text-2xl font-bold text-gray-800 mb-6">Manage Study Materials</h3>
                <form id="study-material-form" class="space-y-4 mb-8 p-4 border border-gray-200 rounded-lg bg-gray-50">
                    <input type="hidden" id="sm-doc-id">
                    <div>
                        <label for="sm-title" class="block text-gray-700 text-sm font-semibold mb-2">Title:</label>
                        <input type="text" id="sm-title" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div>
                        <label for="sm-description" class="block text-gray-700 text-sm font-semibold mb-2">Description:</label>
                        <textarea id="sm-description" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-24" required></textarea>
                    </div>
                    <div>
                        <label for="sm-link" class="block text-gray-700 text-sm font-semibold mb-2">Link (URL):</label>
                        <input type="url" id="sm-link" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="flex space-x-4">
                        <button type="submit" class="bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors duration-200 font-semibold shadow-md">Add/Update Material</button>
                        <button type="button" id="sm-cancel-edit" class="bg-gray-400 text-white py-2 px-6 rounded-md hover:bg-gray-500 transition-colors duration-200 font-semibold shadow-md hidden">Cancel Edit</button>
                    </div>
                </form>

                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-sm">
                        <thead>
                            <tr class="bg-gray-100 text-gray-700 uppercase text-sm leading-normal">
                                <th class="py-3 px-6 text-left">Title</th>
                                <th class="py-3 px-6 text-left">Description</th>
                                <th class="py-3 px-6 text-left">Link</th>
                                <th class="py-3 px-6 text-center">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="sm-table-body" class="text-gray-600 text-sm font-light">
                            <tr><td colspan="4" class="py-4 text-center">Loading materials...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Tab Content: Current Affairs - UPDATED FOR DAILY DIGEST -->
            <div id="tab-content-currentAffairs" class="tab-content hidden bg-white p-8 rounded-xl shadow-md border border-gray-200">
                <h3 class="text-2xl font-bold text-gray-800 mb-6">Manage Daily Current Affairs Digests</h3>
                <form id="current-affairs-form" class="space-y-4 mb-8 p-4 border border-gray-200 rounded-lg bg-gray-50">
                    <input type="hidden" id="ca-doc-id">
                    <div>
                        <label for="ca-date" class="block text-gray-700 text-sm font-semibold mb-2">Date (YYYY-MM-DD):</label>
                        <input type="date" id="ca-date" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div>
                        <label for="ca-summary-title" class="block text-gray-700 text-sm font-semibold mb-2">Summary Title (e.g., Daily CA: July 22, 2025):</label>
                        <input type="text" id="ca-summary-title" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div>
                        <label for="ca-summary-content" class="block text-gray-700 text-sm font-semibold mb-2">Summary Content (Full daily digest):</label>
                        <textarea id="ca-summary-content" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-48" required placeholder="Write the comprehensive daily current affairs summary here. Markdown is supported on the frontend."></textarea>
                    </div>
                    <div>
                        <label for="ca-daily-report-link" class="block text-gray-700 text-sm font-semibold mb-2">Daily Report Link (Optional URL to PDF/external page):</label>
                        <input type="url" id="ca-daily-report-link" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="flex space-x-4">
                        <button type="submit" class="bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors duration-200 font-semibold shadow-md">Add/Update Digest</button>
                        <button type="button" id="ca-cancel-edit" class="bg-gray-400 text-white py-2 px-6 rounded-md hover:bg-gray-500 transition-colors duration-200 font-semibold shadow-md hidden">Cancel Edit</button>
                    </div>
                </form>

                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-sm">
                        <thead>
                            <tr class="bg-gray-100 text-gray-700 uppercase text-sm leading-normal">
                                <th class="py-3 px-6 text-left">Date</th>
                                <th class="py-3 px-6 text-left">Summary Title</th>
                                <th class="py-3 px-6 text-left">Content Preview</th>
                                <th class="py-3 px-6 text-left">Report Link</th>
                                <th class="py-3 px-6 text-center">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="ca-table-body" class="text-gray-600 text-sm font-light">
                            <tr><td colspan="5" class="py-4 text-center">Loading daily digests...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Tab Content: PYQs -->
            <div id="tab-content-pyqs" class="tab-content hidden bg-white p-8 rounded-xl shadow-md border border-gray-200">
                <h3 class="text-2xl font-bold text-gray-800 mb-6">Manage Previous Year Questions (PYQs)</h3>
                <form id="pyqs-form" class="space-y-4 mb-8 p-4 border border-gray-200 rounded-lg bg-gray-50">
                    <input type="hidden" id="pyqs-doc-id">
                    <div>
                        <label for="pyqs-year" class="block text-gray-700 text-sm font-semibold mb-2">Year:</label>
                        <input type="number" id="pyqs-year" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required min="2000" max="${new Date().getFullYear()}">
                    </div>
                    <div>
                        <label for="pyqs-paper" class="block text-gray-700 text-sm font-semibold mb-2">Paper (e.g., GS Paper I, CSAT, Essay):</label>
                        <input type="text" id="pyqs-paper" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div>
                        <label for="pyqs-description" class="block text-gray-700 text-sm font-semibold mb-2">Description (e.g., Full Paper, Sectional):</label>
                        <textarea id="pyqs-description" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-20"></textarea>
                    </div>
                    <div>
                        <label for="pyqs-link" class="block text-gray-700 text-sm font-semibold mb-2">Link (URL to PDF/Page):</label>
                        <input type="url" id="pyqs-link" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="flex space-x-4">
                        <button type="submit" class="bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors duration-200 font-semibold shadow-md">Add/Update PYQ</button>
                        <button type="button" id="pyqs-cancel-edit" class="bg-gray-400 text-white py-2 px-6 rounded-md hover:bg-gray-500 transition-colors duration-200 font-semibold shadow-md hidden">Cancel Edit</button>
                    </div>
                </form>

                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-sm">
                        <thead>
                            <tr class="bg-gray-100 text-gray-700 uppercase text-sm leading-normal">
                                <th class="py-3 px-6 text-left">Year</th>
                                <th class="py-3 px-6 text-left">Paper</th>
                                <th class="py-3 px-6 text-left">Description</th>
                                <th class="py-3 px-6 text-left">Link</th>
                                <th class="py-3 px-6 text-center">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="pyqs-table-body" class="text-gray-600 text-sm font-light">
                            <tr><td colspan="5" class="py-4 text-center">Loading PYQs...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Tab Content: Answer Writing Practice - UPDATED FIELDS -->
            <div id="tab-content-answerWriting" class="tab-content hidden bg-white p-8 rounded-xl shadow-md border border-gray-200">
                <h3 class="text-2xl font-bold text-gray-800 mb-6">Manage Answer Writing Practice Questions</h3>
                <form id="answer-writing-form" class="space-y-4 mb-8 p-4 border border-gray-200 rounded-lg bg-gray-50">
                    <input type="hidden" id="aw-doc-id">
                    <div>
                        <label for="aw-date" class="block text-gray-700 text-sm font-semibold mb-2">Date (YYYY-MM-DD):</label>
                        <input type="date" id="aw-date" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div>
                        <label for="aw-question" class="block text-gray-700 text-sm font-semibold mb-2">Question:</label>
                        <textarea id="aw-question" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-24" required placeholder="Type the full Mains question here."></textarea>
                    </div>
                    <div>
                        <label for="aw-model-answer-content" class="block text-gray-700 text-sm font-semibold mb-2">Model Answer Content (Use HTML for structure, e.g., &lt;h2&gt;, &lt;ul&gt;, &lt;table&gt;):</label>
                        <textarea id="aw-model-answer-content" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-48" placeholder="Provide the detailed model answer here. You can use HTML tags for headings, lists, tables, etc."></textarea>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label for="aw-difficulty" class="block text-gray-700 text-sm font-semibold mb-2">Difficulty:</label>
                            <select id="aw-difficulty" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">Select Difficulty</option>
                                <option value="Easy">Easy</option>
                                <option value="Medium">Medium</option>
                                <option value="Hard">Hard</option>
                            </select>
                        </div>
                        <div>
                            <label for="aw-marks" class="block text-gray-700 text-sm font-semibold mb-2">Marks:</label>
                            <input type="number" id="aw-marks" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" min="1" max="250">
                        </div>
                        <div>
                            <label for="aw-time-limit-minutes" class="block text-gray-700 text-sm font-semibold mb-2">Time Limit (Minutes):</label>
                            <input type="number" id="aw-time-limit-minutes" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" min="1" max="60">
                        </div>
                    </div>
                    <div>
                        <label for="aw-official-link" class="block text-gray-700 text-sm font-semibold mb-2">Official Link (Optional URL to source/resource):</label>
                        <input type="url" id="aw-official-link" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="flex space-x-4">
                        <button type="submit" class="bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors duration-200 font-semibold shadow-md">Add/Update Question</button>
                        <button type="button" id="aw-cancel-edit" class="bg-gray-400 text-white py-2 px-6 rounded-md hover:bg-gray-500 transition-colors duration-200 font-semibold shadow-md hidden">Cancel Edit</button>
                    </div>
                </form>

                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-sm">
                        <thead>
                            <tr class="bg-gray-100 text-gray-700 uppercase text-sm leading-normal">
                                <th class="py-3 px-6 text-left">Date</th>
                                <th class="py-3 px-6 text-left">Question Preview</th>
                                <th class="py-3 px-6 text-left">Difficulty</th>
                                <th class="py-3 px-6 text-left">Marks</th>
                                <th class="py-3 px-6 text-left">Time</th>
                                <th class="py-3 px-6 text-left">Link</th>
                                <th class="py-3 px-6 text-center">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="aw-table-body" class="text-gray-600 text-sm font-light">
                            <tr><td colspan="7" class="py-4 text-center">Loading questions...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Tab Content: Syllabus -->
            <div id="tab-content-syllabus" class="tab-content hidden bg-white p-8 rounded-xl shadow-md border border-gray-200">
                <h3 class="text-2xl font-bold text-gray-800 mb-6">Manage Syllabus Sections</h3>
                <form id="syllabus-form" class="space-y-4 mb-8 p-4 border border-gray-200 rounded-lg bg-gray-50">
                    <input type="hidden" id="syll-doc-id">
                    <div>
                        <label for="syll-title" class="block text-gray-700 text-sm font-semibold mb-2">Section Title (e.g., Prelims GS I - History):</label>
                        <input type="text" id="syll-title" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div>
                        <label for="syll-content" class="block text-gray-700 text-sm font-semibold mb-2">Syllabus Content (Use HTML for tables/lists, or Markdown):</label>
                        <textarea id="syll-content" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-32" required placeholder="Example HTML: <h2>Topic</h2><ul><li>Point 1</li><li>Point 2</li></ul><table><thead><tr><th>Header</th></tr></thead><tbody><tr><td>Data</td></tr></tbody></table>"></textarea>
                    </div>
                    <div>
                        <label for="syll-link" class="block text-gray-700 text-sm font-semibold mb-2">Official Link (Optional):</label>
                        <input type="url" id="syll-link" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="flex space-x-4">
                        <button type="submit" class="bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors duration-200 font-semibold shadow-md">Add/Update Syllabus</button>
                        <button type="button" id="syll-cancel-edit" class="bg-gray-400 text-white py-2 px-6 rounded-md hover:bg-gray-500 transition-colors duration-200 font-semibold shadow-md hidden">Cancel Edit</button>
                    </div>
                </form>

                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-sm">
                        <thead>
                            <tr class="bg-gray-100 text-gray-700 uppercase text-sm leading-normal">
                                <th class="py-3 px-6 text-left">Section Title</th>
                                <th class="py-3 px-6 text-left">Content Preview</th>
                                <th class="py-3 px-6 text-left">Official Link</th>
                                <th class="py-3 px-6 text-center">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="syll-table-body" class="text-gray-600 text-sm font-light">
                            <tr><td colspan="4" class="py-4 text-center">Loading syllabus sections...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Tab Content: Study Planners -->
            <div id="tab-content-studyPlanners" class="tab-content hidden bg-white p-8 rounded-xl shadow-md border border-gray-200">
                <h3 class="text-2xl font-bold text-gray-800 mb-6">Manage Study Planners/Tips</h3>
                <form id="study-planner-form" class="space-y-4 mb-8 p-4 border border-gray-200 rounded-lg bg-gray-50">
                    <input type="hidden" id="sp-doc-id">
                    <div>
                        <label for="sp-title" class="block text-gray-700 text-sm font-semibold mb-2">Planner/Tip Title:</label>
                        <input type="text" id="sp-title" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div>
                        <label for="sp-description" class="block text-gray-700 text-sm font-semibold mb-2">Description/Content:</label>
                        <textarea id="sp-description" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-24" required></textarea>
                    </div>
                    <div>
                        <label for="sp-link" class="block text-gray-700 text-sm font-semibold mb-2">Link (Optional, e.g., detailed planner PDF):</label>
                        <input type="url" id="sp-link" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="flex space-x-4">
                        <button type="submit" class="bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors duration-200 font-semibold shadow-md">Add/Update Planner</button>
                        <button type="button" id="sp-cancel-edit" class="bg-gray-400 text-white py-2 px-6 rounded-md hover:bg-gray-500 transition-colors duration-200 font-semibold shadow-md hidden">Cancel Edit</button>
                    </div>
                </form>

                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-sm">
                        <thead>
                            <tr class="bg-gray-100 text-gray-700 uppercase text-sm leading-normal">
                                <th class="py-3 px-6 text-left">Title</th>
                                <th class="py-3 px-6 text-left">Description</th>
                                <th class="py-3 px-6 text-left">Link</th>
                                <th class="py-3 px-6 text-center">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="sp-table-body" class="text-gray-600 text-sm font-light">
                            <tr><td colspan="4" class="py-4 text-center">Loading planners...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- NEW Tab Content: Weekly Plan -->
            <div id="tab-content-weeklyPlan" class="tab-content hidden bg-white p-8 rounded-xl shadow-md border border-gray-200">
                <h3 class="text-2xl font-bold text-gray-800 mb-6">Manage Weekly Plan Data</h3>

                <!-- Sub-tab Navigation for Weekly Plan -->
                <div class="flex flex-wrap justify-start mb-6 bg-gray-100 rounded-lg p-2 shadow-inner">
                    <button class="sub-tab-button px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-blue-100 transition-colors duration-200 font-medium active" data-sub-tab="wpSyllabusTopics">Syllabus Topics</button>
                    <button class="sub-tab-button px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-blue-100 transition-colors duration-200 font-medium ml-2 mt-2 md:mt-0" data-sub-tab="wpResources">Resources</button>
                    <button class="sub-tab-button px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-blue-100 transition-colors duration-200 font-medium ml-2 mt-2 md:mt-0" data-sub-tab="wpFixedSchedule">Fixed Schedule</button> <!-- NEW FIXED SCHEDULE SUB-TAB -->
                </div>

                <!-- Sub-tab Content: Syllabus Topics -->
                <div id="sub-tab-content-wpSyllabusTopics" class="sub-tab-content">
                    <h4 class="text-xl font-bold text-gray-700 mb-4">Add/Edit Syllabus Topic</h4>
                    <form id="wp-syllabus-topic-form" class="space-y-4 mb-8 p-4 border border-gray-200 rounded-lg bg-gray-50">
                        <input type="hidden" id="wp-syll-doc-id">
                        <div>
                            <label for="wp-syll-subject" class="block text-gray-700 text-sm font-semibold mb-2">Subject:</label>
                            <input type="text" id="wp-syll-subject" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required placeholder="e.g., History, Polity">
                        </div>
                        <div>
                            <label for="wp-syll-topic" class="block text-gray-700 text-sm font-semibold mb-2">Topic:</label>
                            <input type="text" id="wp-syll-topic" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required placeholder="e.g., Ancient Indian History, Indian Constitution">
                        </div>
                        <div>
                            <label for="wp-syll-description" class="block text-gray-700 text-sm font-semibold mb-2">Description (Optional):</label>
                            <textarea id="wp-syll-description" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-20" placeholder="Brief details about the topic."></textarea>
                        </div>
                        <div class="flex space-x-4">
                            <button type="submit" class="bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors duration-200 font-semibold shadow-md">Add/Update Topic</button>
                            <button type="button" id="wp-syll-cancel-edit" class="bg-gray-400 text-white py-2 px-6 rounded-md hover:bg-gray-500 transition-colors duration-200 font-semibold shadow-md hidden">Cancel Edit</button>
                        </div>
                    </form>

                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-sm">
                            <thead>
                                <tr class="bg-gray-100 text-gray-700 uppercase text-sm leading-normal">
                                    <th class="py-3 px-6 text-left">Subject</th>
                                    <th class="py-3 px-6 text-left">Topic</th>
                                    <th class="py-3 px-6 text-left">Description</th>
                                    <th class="py-3 px-6 text-center">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="wp-syll-table-body" class="text-gray-600 text-sm font-light">
                                <tr><td colspan="4" class="py-4 text-center">Loading syllabus topics...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Sub-tab Content: Resources -->
                <div id="sub-tab-content-wpResources" class="sub-tab-content hidden">
                    <h4 class="text-xl font-bold text-gray-700 mb-4">Add/Edit Resource</h4>
                    <form id="wp-resource-form" class="space-y-4 mb-8 p-4 border border-gray-200 rounded-lg bg-gray-50">
                        <input type="hidden" id="wp-resource-doc-id">
                        <div>
                            <label for="wp-resource-name" class="block text-gray-700 text-sm font-semibold mb-2">Resource Name:</label>
                            <input type="text" id="wp-resource-name" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required placeholder="e.g., NCERT Class 11 Geography">
                        </div>
                        <div>
                            <label for="wp-resource-type" class="block text-gray-700 text-sm font-semibold mb-2">Type:</label>
                            <select id="wp-resource-type" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">Select Type</option>
                                <option value="Book">Book</option>
                                <option value="Notes">Notes</option>
                                <option value="Video Series">Video Series</option>
                                <option value="Website">Website</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div>
                            <label for="wp-resource-link" class="block text-gray-700 text-sm font-semibold mb-2">Link (URL, Optional):</label>
                            <input type="url" id="wp-resource-link" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="URL to the resource.">
                        </div>
                        <div>
                            <label for="wp-resource-associated-subjects" class="block text-gray-700 text-sm font-semibold mb-2">Associated Subjects (Comma-separated):</label>
                            <input type="text" id="wp-resource-associated-subjects" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g., History, Geography">
                        </div>
                        <div>
                            <label for="wp-resource-associated-topics" class="block text-gray-700 text-sm font-semibold mb-2">Associated Topics (Comma-separated):</label>
                            <input type="text" id="wp-resource-associated-topics" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g., Physical Geography, Indian Constitution">
                        </div>
                        <div class="flex space-x-4">
                            <button type="submit" class="bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors duration-200 font-semibold shadow-md">Add/Update Resource</button>
                            <button type="button" id="wp-resource-cancel-edit" class="bg-gray-400 text-white py-2 px-6 rounded-md hover:bg-gray-500 transition-colors duration-200 font-semibold shadow-md hidden">Cancel Edit</button>
                        </div>
                    </form>

                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-sm">
                            <thead>
                                <tr class="bg-gray-100 text-gray-700 uppercase text-sm leading-normal">
                                    <th class="py-3 px-6 text-left">Name</th>
                                    <th class="py-3 px-6 text-left">Type</th>
                                    <th class="py-3 px-6 text-left">Subjects</th>
                                    <th class="py-3 px-6 text-left">Topics</th>
                                    <th class="py-3 px-6 text-center">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="wp-resource-table-body" class="text-gray-600 text-sm font-light">
                                <tr><td colspan="5" class="py-4 text-center">Loading resources...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- NEW Sub-tab Content: Fixed Schedule -->
                <div id="sub-tab-content-wpFixedSchedule" class="sub-tab-content hidden">
                    <h4 class="text-xl font-bold text-gray-700 mb-4">Manage Fixed Weekly Schedule</h4>
                    <form id="wp-fixed-schedule-form" class="space-y-4 mb-8 p-4 border border-gray-200 rounded-lg bg-gray-50">
                        <div>
                            <label for="wp-fixed-schedule-day" class="block text-gray-700 text-sm font-semibold mb-2">Select Day:</label>
                            <select id="wp-fixed-schedule-day" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">-- Select a Day --</option>
                                <option value="Monday">Monday</option>
                                <option value="Tuesday">Tuesday</option>
                                <option value="Wednesday">Wednesday</option>
                                <option value="Thursday">Thursday</option>
                                <option value="Friday">Friday</option>
                                <option value="Saturday">Saturday</option>
                                <option value="Sunday">Sunday</option>
                            </select>
                        </div>

                        <div id="schedule-entries-container" class="space-y-3 p-4 border border-gray-300 rounded-md bg-white">
                            <p class="text-gray-600 text-center">Select a day to add schedule entries.</p>
                            <!-- Dynamic schedule entries will be added here -->
                        </div>
                        <button type="button" id="add-schedule-entry-btn" class="btn-primary mt-4 w-full" disabled>
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4v16m8-8H4"></path></svg>
                            Add Schedule Entry
                        </button>

                        <div class="flex space-x-4 mt-6">
                            <button type="submit" class="bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors duration-200 font-semibold shadow-md">Save Schedule for Day</button>
                            <button type="button" id="wp-fixed-schedule-cancel-edit" class="bg-gray-400 text-white py-2 px-6 rounded-md hover:bg-gray-500 transition-colors duration-200 font-semibold shadow-md hidden">Clear Form</button>
                        </div>
                    </form>

                    <div class="overflow-x-auto mt-8">
                        <h4 class="text-xl font-bold text-gray-700 mb-4" id="fixed-schedule-table-title">Schedule for Selected Day</h4>
                        <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-sm">
                            <thead>
                                <tr class="bg-gray-100 text-gray-700 uppercase text-sm leading-normal">
                                    <th class="py-3 px-6 text-left">Time</th>
                                    <th class="py-3 px-6 text-left">Activity</th>
                                    <th class="py-3 px-6 text-left">Type</th>
                                    <th class="py-3 px-6 text-center">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="wp-fixed-schedule-table-body" class="text-gray-600 text-sm font-light">
                                <tr><td colspan="4" class="py-4 text-center">Select a day to view its schedule.</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer - Directly embedded -->
    <footer class="bg-gray-800 text-white p-6 text-center mt-12 rounded-t-lg shadow-inner">
        <div class="container mx-auto">
            <p class="mb-2">&copy; 2025 UPSC Ascent. Admin Portal.</p>
            <p class="text-sm opacity-80">Manage content for your UPSC aspirants.</p>
        </div>
    </footer>

    <!-- Firebase SDKs - Initialized here for direct page access -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
        import { getFirestore, collection, addDoc, getDocs, doc, updateDoc, deleteDoc, onSnapshot, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        // Your Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAn0XLw2XA26UBf4OevQkqp5UESakQI8kg",
            authDomain: "upscbuddy-5050d.firebaseapp.com",
            projectId: "upscbuddy-5050d",
            storageBucket: "upscbuddy-5050d.firebase-storage.app",
            messagingSenderId: "632136482996",
            appId: "1:632136482996:web:4bebdeb43c266398d697e1",
            measurementId: "G-QLVRYRJFL2"
        };

        // Global variables for Firebase instances
        window.firebaseApp = null;
        window.db = null;
        window.auth = null;
        window.userId = null;
        window.appId = firebaseConfig.appId.split(':')[1]; // Extract appId from the provided config
        window.isAuthReady = false; // Flag to indicate auth state is ready

        // Initialize Firebase
        window.firebaseApp = initializeApp(firebaseConfig);
        window.db = getFirestore(window.firebaseApp);
        window.auth = getAuth(window.firebaseApp);

        // Make Firebase instances and utility functions globally available for admin.js
        window.getFirestore = getFirestore;
        window.collection = collection;
        window.addDoc = addDoc;
        window.getDocs = getDocs;
        window.doc = doc;
        window.updateDoc = updateDoc;
        window.deleteDoc = deleteDoc;
        window.onSnapshot = onSnapshot;
        window.setDoc = setDoc;
        window.getDoc = getDoc;
        window.signInWithEmailAndPassword = signInWithEmailAndPassword;
        window.signOut = signOut;
        window.onAuthStateChanged = onAuthStateChanged;

        // Custom modal function (instead of alert/confirm)
        window.showCustomModal = function(title, message, type = 'info', callback = null) {
            const modalId = 'custom-modal-' + Date.now();
            const modalHtml = `
                <div id="${modalId}" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 p-4">
                    <div class="bg-white rounded-lg shadow-xl max-w-sm w-full mx-auto p-6 transform transition-all duration-300 scale-95 opacity-0" style="animation: modal-fade-in 0.3s forwards;">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-semibold ${type === 'error' ? 'text-red-600' : (type === 'warning' ? 'text-yellow-600' : 'text-blue-600')}">${title}</h3>
                            <button class="text-gray-500 hover:text-gray-700 close-modal-btn" data-modal-id="${modalId}">&times;</button>
                        </div>
                        <p class="text-gray-700 mb-6">${message}</p>
                        <div class="flex justify-end space-x-2">
                            ${type === 'warning' ? `<button class="bg-gray-400 text-white px-5 py-2 rounded-md hover:bg-gray-500 transition-colors duration-200 cancel-modal-btn" data-modal-id="${modalId}">Cancel</button>` : ''}
                            <button class="bg-blue-600 text-white px-5 py-2 rounded-md hover:bg-blue-700 transition-colors duration-200 ok-modal-btn" data-modal-id="${modalId}">OK</button>
                        </div>
                    </div>
                </div>
                <style>
                    @keyframes modal-fade-in {
                        from { opacity: 0; transform: scale(0.95); }
                        to { opacity: 1; transform: scale(1); }
                    }
                    @keyframes modal-fade-out {
                        from { opacity: 1; transform: scale(1); }
                        to { opacity: 0; transform: scale(0.95); }
                    }
                </style>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHtml);

            const modalElement = document.getElementById(modalId);
            const closeAndRemove = (executeCallback) => {
                modalElement.style.animation = 'modal-fade-out 0.3s forwards';
                modalElement.addEventListener('animationend', () => {
                    modalElement.remove();
                    if (executeCallback && callback) callback(true); // Indicate confirmed
                    else if (!executeCallback && callback) callback(false); // Indicate cancelled
                });
            };

            modalElement.querySelectorAll('.ok-modal-btn').forEach(button => {
                button.onclick = () => closeAndRemove(true);
            });
            modalElement.querySelectorAll('.cancel-modal-btn').forEach(button => {
                button.onclick = () => closeAndRemove(false);
            });
            modalElement.querySelectorAll('.close-modal-btn').forEach(button => {
                button.onclick = () => closeAndRemove(false);
            });
        };

        // Global navigation function (for admin to go to portal)
        window.navigate = function(page) {
            window.location.href = page;
        };

        // Admin page specific logic for showing/hiding dashboard
        document.addEventListener('DOMContentLoaded', () => {
            const loginSection = document.getElementById('login-section');
            const adminDashboard = document.getElementById('admin-dashboard');

            // Initial check on page load
            onAuthStateChanged(window.auth, (user) => {
                if (user) {
                    loginSection.classList.add('hidden');
                    adminDashboard.classList.remove('hidden');
                    // Trigger initial content load for the active tab
                    const activeTabButton = document.querySelector('.tab-button.active');
                    if (activeTabButton) {
                        // This call is now handled by admin.js's onAuthStateChanged listener
                        // which is designed to wait for isAuthReady.
                        // No need to call loadContent directly here in HTML.
                    }
                } else {
                    loginSection.classList.remove('hidden');
                    adminDashboard.classList.add('hidden');
                }
            });
        });
    </script>
    <!-- Admin-specific JavaScript for login and content management -->
    <script type="module" src="js/admin.js"></script>
</body>
</html>
