// inject-firebase-config.js
const fs = require('fs');

// Read environment variables provided by Netlify
const firebaseConfig = {
  apiKey: process.env.FIREBASE_API_KEY,
  authDomain: process.env.FIREBASE_AUTH_DOMAIN,
  projectId: process.env.FIREBASE_PROJECT_ID,
  storageBucket: process.env.FIREBASE_STORAGE_BUCKET,
  messagingSenderId: process.env.FIREBASE_MESSAGING_SENDER_ID,
  appId: process.env.FIREBASE_APP_ID,
  // measurementId is optional, only include if the environment variable is set
  ...(process.env.FIREBASE_MEASUREMENT_ID && { measurementId: process.env.FIREBASE_MEASUREMENT_ID })
};

// Generate the content for firebase-config.js
// This file will be imported by your other HTML files
const content = `
// This file is automatically generated by inject-firebase-config.js during the Netlify build.
// Do not edit this file directly.
export const firebaseConfig = ${JSON.stringify(firebaseConfig, null, 2)};
`;

// Write the content to firebase-config.js
fs.writeFileSync('./firebase-config.js', content);

console.log('Firebase config successfully injected into firebase-config.js');
